(this["webpackJsonponline-order-frontend"]=this["webpackJsonponline-order-frontend"]||[]).push([[0],{148:function(e,t,n){},149:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(25),s=n.n(r),i=(n(148),n(4)),o=n(235),l=n(231),u=(n(149),n(76)),j=n(138),d=n(68),h=n(53),b=n(229),f=n(228),O=function(e){var t="/login?username=".concat(e.username,"&password=").concat(e.password);return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw console.log(e.status),Error("Fail to log in")}))},m=function(e){return fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to sign up")}))},p=n(141),x=n(7),g=u.a.Option,y=function(e){var t=e.itemId,n=Object(a.useState)(!1),c=Object(i.a)(n,2),r=c[0],s=c[1];return Object(x.jsx)(d.a,{title:"Add to shopping cart",children:Object(x.jsx)(h.a,{loading:r,type:"primary",icon:Object(x.jsx)(p.a,{}),onClick:function(){s(!0),function(e){return fetch("/order/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(t).then((function(){return j.b.success("Successfully add item")})).catch((function(e){return j.b.error(e.message)})).finally((function(){s(!1)}))}})})},v=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)([]),h=Object(i.a)(d,2),O=h[0],m=h[1],p=Object(a.useState)(!1),v=Object(i.a)(p,2),S=v[0],w=v[1],C=Object(a.useState)(!1),I=Object(i.a)(C,2),F=I[0],P=I[1];return Object(a.useEffect)((function(){P(!0),fetch("/restaurants").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get restaurants");return e.json()})).then((function(e){m(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){P(!1)}))}),[]),Object(a.useEffect)((function(){var e;o&&(w(!0),(e=o,fetch("/restaurant/".concat(e,"/menu")).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get menus");return e.json()}))).then((function(e){c(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){w(!1)})))}),[o]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(u.a,{value:o,onSelect:function(e){return l(e)},placeholder:"Select a restaurant",loading:F,style:{width:300},onChange:function(){},children:O.map((function(e){return Object(x.jsx)(g,{value:e.id,children:e.name})}))}),o&&Object(x.jsx)(b.b,{style:{marginTop:20},loading:S,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:n,renderItem:function(e){return Object(x.jsx)(b.b.Item,{children:Object(x.jsxs)(f.a,{title:e.name,extra:Object(x.jsx)(y,{itemId:e.id}),children:[Object(x.jsx)("img",{src:e.imageUrl,alt:e.name,style:{height:340,width:"100%",display:"block"}}),"Price: ".concat(e.price)]})})}})]})},S=n(13),w=n(11),C=n(15),I=n(14),F=n(230),P=n(233),k=n(236),E=n(237),T=function(e){Object(C.a)(n,e);var t=Object(I.a)(n);function n(){var e;Object(w.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loading:!1},e.onFinish=function(t){e.setState({loading:!0}),O(t).then((function(){j.b.success("Login Successful"),e.props.onSuccess()})).catch((function(e){j.b.error(e.message)})).finally((function(){e.setState({loading:!1})}))},e.render=function(){return Object(x.jsxs)(F.a,{name:"normal_login",onFinish:e.onFinish,style:{width:300,margin:"auto"},children:[Object(x.jsx)(F.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(x.jsx)(P.a,{prefix:Object(x.jsx)(k.a,{}),placeholder:"Username"})}),Object(x.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(x.jsx)(P.a.Password,{prefix:Object(x.jsx)(E.a,{}),placeholder:"Password"})}),Object(x.jsx)(F.a.Item,{children:Object(x.jsx)(h.a,{type:"primary",htmlType:"submit",loading:e.state.loading,children:"Login"})})]})},e}return Object(S.a)(n)}(c.a.Component),M=T,q=n(234),L=l.a.Text,N=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),f=d[0],O=d[1],m=Object(a.useState)(!1),p=Object(i.a)(m,2),g=p[0],y=p[1];Object(a.useEffect)((function(){n&&(O(!0),fetch("/cart").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get shopping cart data");return e.json()})).then((function(e){l(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){O(!1)})))}),[n]);var v=function(){c(!1)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.a,{type:"primary",shape:"round",onClick:function(){c(!0)},children:"Cart"}),Object(x.jsx)(q.a,{title:"My Shopping Cart",onClose:v,visible:n,width:520,footer:Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)(L,{strong:!0,children:"Total price: $".concat(null===o||void 0===o?void 0:o.totalPrice)}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.a,{onClick:v,style:{marginRight:8},children:"Cancel"}),Object(x.jsx)(h.a,{onClick:function(){y(!0),fetch("/checkout").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to checkout")})).then((function(){j.b.success("Successfully checkout"),c(!1)})).catch((function(e){j.b.error(e.message)})).finally((function(){y(!1)}))},type:"primary",loading:g,disabled:f||0===(null===o||void 0===o?void 0:o.orderItemList.length),children:"Checkout"})]})]}),children:Object(x.jsx)(b.b,{loading:f,itemLayout:"horizontal",dataSource:null===o||void 0===o?void 0:o.orderItemList,renderItem:function(e){return Object(x.jsx)(b.b.Item,{children:Object(x.jsx)(b.b.Item.Meta,{title:e.menuItem.name,description:"$".concat(e.price)})})}})})]})},R=n(232),A=function(e){Object(C.a)(n,e);var t=Object(I.a)(n);function n(){var e;Object(w.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={displayModal:!1},e.handleCancel=function(){e.setState({displayModal:!1})},e.signupOnClick=function(){e.setState({displayModal:!0})},e.onFinish=function(t){m(t).then((function(){e.setState({displayModal:!1}),j.b.success("Successfully signed up")})).catch((function(e){j.b.error(e.message)}))},e.render=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.a,{shape:"round",type:"primary",onClick:e.signupOnClick,children:"Register"}),Object(x.jsx)(R.a,{title:"Register",visible:e.state.displayModal,onCancel:e.handleCancel,footer:null,destroyOnClose:!0,children:Object(x.jsxs)(F.a,{name:"normal_register",initialValues:{remember:!0},onFinish:e.onFinish,preserve:!1,children:[Object(x.jsx)(F.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(x.jsx)(P.a,{prefix:Object(x.jsx)(k.a,{}),placeholder:"Email"})}),Object(x.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(x.jsx)(P.a,{prefix:Object(x.jsx)(E.a,{}),placeholder:"Password"})}),Object(x.jsx)(F.a.Item,{name:"firstName",rules:[{required:!0,message:"Please input your first name!"}],children:Object(x.jsx)(P.a,{placeholder:"firstname"})}),Object(x.jsx)(F.a.Item,{name:"lastName",rules:[{required:!0,message:"Please input your last name!"}],children:Object(x.jsx)(P.a,{placeholder:"lastname"})}),Object(x.jsx)(F.a.Item,{children:Object(x.jsx)(h.a,{type:"primary",htmlType:"submit",children:"Register"})})]})})]})},e}return Object(S.a)(n)}(c.a.Component),H=A,J=o.a.Header,U=o.a.Content,B=l.a.Title;var $=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(x.jsxs)(o.a,{style:{height:"100vh"},children:[Object(x.jsx)(J,{children:Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)(B,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Online-Order :)"}),Object(x.jsx)("div",{children:n?Object(x.jsx)(N,{}):Object(x.jsx)(H,{})})]})}),Object(x.jsx)(U,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(x.jsx)(v,{}):Object(x.jsx)(M,{onSuccess:function(){return c(!0)}})})]})};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)($,{})}),document.getElementById("root"))}},[[227,1,2]]]);
//# sourceMappingURL=main.45a8889e.chunk.js.map